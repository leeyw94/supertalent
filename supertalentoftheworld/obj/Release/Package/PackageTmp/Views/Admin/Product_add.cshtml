<link href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.12/summernote-lite.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.12/summernote-lite.js"></script>
<link href="/Content/common/light-bootstrap-dashboard.css" rel="stylesheet" />


<script src="/Content/common/demo.js"></script>
<script src="/Content/common/moment.min.js"></script>
<script src="/Content/common/bootstrap-datetimepicker.js"></script>
@Html.Partial("/Views/Layout/Header_admin.cshtml")

<div class="container">

    <div class="text-center" style="margin:50px;">
        <h2 style="font-weight:bold;">Administrator Product Management Page</h2>
    </div>
    <div class="card" style="background-color:#f3f3f3; padding:30px">

        <form action="/Admin/Product_add" method="post" enctype="multipart/form-data">

            <div class="note row">
                <div class="col-lg-3">
                    <h2 class="title-text">Title</h2>
                </div>
                <div class="col-lg-6 note">
                    <input type="text" class="form-control" name="title" />
                </div>
            </div>

            <div class="note row">
                <div class="col-lg-3">
                    <h2 class="title-text">Category</h2>
                </div>
                <div class="col-lg-6 note">
                    <select name="Category" class="form-control">
                        <option value="0">Original-English</option>
                        <option value="1">Original-한글</option>
                    </select>
                </div>

            </div>

            <div class="note row">
                <div class="col-lg-3">
                    <h2 class="title-text">Price</h2>
                </div>
                <div class="col-lg-3 note">
                    <label for="Price_d">USD</label>
                    <input type="text" class="form-control" name="Price_d" id="cma_test" onkeyup="cmaComma(this);" onchange="cmaComma(this);" />
                </div>
                <div class="col-lg-3 note">
                    <label for="Price_w">KRW</label>
                    <input type="text" class="form-control" name="Price_w" id="cma_test" onkeyup="cmaComma(this);" onchange="cmaComma(this);" />
                </div>

            </div>

            <div class="note row">
                <div class="col-lg-3 form-inline">
                    <h2 class="title-text">Travel Period</h2>
                </div>

                <div class="col-lg-3 note">

                    <label for="from">From</label>
                    <input class="form-control text-center datepicker" type="text" id="Sdate" name="Sdate">
                </div>
                <div class="col-lg-3 note">
                    <label for="to">To</label>
                    <input class="form-control text-center datepicker" type="text" id="Edate" name="Edate">
                </div>


            </div>



            <div class="note row">
                <div class="col-lg-3 form-inline">
                    <h2 class="title-text">Info</h2>
                </div>

                <div class="col-lg-3 note">

                    <label for="from">From</label>
                    <input class="form-control" type="text" id="Startc" name="Startc" placeholder="Thursday 17th October, Paris France">
                </div>
                <div class="col-lg-3 note">
                    <label for="to">To</label>
                    <input class="form-control" type="text" id="Endc" name="Endc">
                </div>


            </div>

            <div class="note row">
                <div class="col-lg-3 form-inline">
                    <h2 class="title-text"></h2>
                </div>

                <div class="col-lg-3 note">

                    <label for="from">Country</label>
                    <input class="form-control" type="text" id="Country" name="Country">
                </div>
                <div class="col-lg-3 note">
                    <label for="to">City</label>
                    <input class="form-control" type="text" id="City" name="City">
                </div>


            </div>

            <div class="note row">
                <div class="col-lg-3 form-inline">
                    <h2 class="title-text"></h2>
                </div>

                <div class="col-lg-3 note">
                    <label for="from">Days</label>
                    <input class="form-control" type="text" id="days" name="days" placeholder="숫자만..">
                </div>
                <div class="col-lg-3 note">
                    <label for="to">Code</label>
                    <input class="form-control" type="text" id="Code" name="code">
                </div>

            </div>

            <div class="note row" style="margin:0px;">
                <div class="col-lg-3 form-inline" style="padding-left:0px">
                    <h2 class="title-text">Main Image</h2>
                </div>
                <div class="col-lg-9 row" style="padding-left:7px;">
                    <div class="col-lg-12">
                        <div class="filebox">
                            <label style="width:420px; text-align:center" class="submit-btn" for="input_img">Image Upload</label>
                            <input type="file" id="input_img" name="ImageFile" accept="image/*">
                        </div>
                    </div>
                </div>
                <div class="col-lg-3"></div>
                <div id="c-image" class="c-image img_wrap col-lg-6" style="padding-left:7px;">
                    <img class="thumb-img" style="max-height:300px; min-width:420px; max-width:420px" id="img" />
                </div>
            </div>

            @*<div class="note row">
                    <div class="col-lg-3">
                        <h2 class="title-text">Description</h2>
                    </div>
                    <div class="col-lg-9 note">
                        <textarea id="Description" name="Description"></textarea>
                    </div>
                </div>



                <div class="note row">
                    <div class="col-lg-3 form-inline">

                        <h2 class="title-text">Benefits</h2>
                    </div>
                    <div class="col-lg-9 note">
                        <textarea id="Benefits" name="Benefits"></textarea>
                    </div>
                </div>*@

            <div class="note row">
                <div class="col-lg-3 form-inline">

                    <h2 class="title-text">Notice</h2>
                </div>
                <div class="col-lg-9 note">

                    <textarea id="Notice" name="Notice"></textarea>

                </div>
            </div>

            <div class="note row">
                <div class="col-lg-3 form-inline">

                    <h2 class="title-text">Reservation</h2>
                </div>
                <div class="col-lg-9 note">

                    <textarea id="Reservation" name="Reservation"></textarea>

                </div>
            </div>

            <div class="note row">
                <div class="col-lg-3 form-inline">

                    <h2 class="title-text">Accommodations</h2>
                </div>
                <div class="col-lg-9 note">

                    <textarea id="Accommodations" name="Accommodations"></textarea>

                </div>
            </div>

            <div class="note row">
                <div class="col-lg-3 form-inline">

                    <h2 class="title-text">Cancellation Notice</h2>
                </div>
                <div class="col-lg-9 note">

                    <textarea id="Cancel_Notice" name="Cancel_Notice"></textarea>

                </div>
            </div>

            <div class="note row">
                <div class="col-lg-3 form-inline">

                    <h2 class="title-text">Seller Info</h2>
                </div>
                <div class="col-lg-9 note">

                    <textarea id="Seller_Info" name="Seller_Info"></textarea>

                </div>
            </div>

            <div class="note row">
                <div class="col-lg-3 form-inline">

                    <h2 class="title-text">Includes</h2>
                </div>
                <div class="col-lg-9 note">


                    <textarea id="Includes" name="Includes"></textarea>

                </div>
            </div>

            <div class="note row">
                <div class="col-lg-3 form-inline">

                    <h2 class="title-text">Not Included</h2>
                </div>
                <div class="col-lg-9 note">


                    <textarea id="Not_included" name="Not_included"></textarea>

                </div>
            </div>

            @*<div class="note row">
                    <div class="col-lg-3 form-inline">

                        <h2 class="title-text">Notices and Travel Policy</h2>
                    </div>
                    <div class="col-lg-9 note">


                        <textarea id="Notices_Policy" name="Notices_Policy"></textarea>

                    </div>
                </div>*@

            <div class="note row">
                <div class="col-lg-3 form-inline">

                    <h2 class="title-text">Cancellation and Refund Policy</h2>
                </div>
                <div class="col-lg-9 note">

                    <textarea id="Cancel_Refund" name="Cancel_Refund"></textarea>

                </div>
            </div>


            <div class="text-center" style="margin-right:15px; margin-bottom:50px;">
                <button type="submit" class="submit-btn col-lg-4 col-lg-offset-4">Create</button>
            </div>
        </form>
    </div>
</div>

<style>
    .ui-datepicker-year {
        color: black;
    }

    .ui-datepicker-month {
        color: black;
    }

    .title-text {
        font-size: 1.2em;
        font-weight: bold;
    }

    .note {
        margin-bottom: 30px;
    }

    .c-image {
        min-height: 150px;
        max-width: 285px;
    }

    .filebox label {
        margin: 0;
        padding: .5em .75em;
        color: #999;
        font-size: inherit;
        line-height: normal;
        vertical-align: middle;
        background-color: #fdfdfd;
        cursor: pointer;
        border: 1px solid #ebebeb;
        border-bottom-color: #e2e2e2;
        border-radius: .25em;
    }

    .filebox input[type="file"] {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0,0,0,0);
        border: 0;
    }
</style>

<script>

    $(document).ready(function () {

        demo.initFormExtendedDatetimepickers();
        $("#input_img").on("change", handleImgFileSelect);

    });

    var sel_file;

    $(document).ready(function () {
        var C_count = $('.C_course').length;
        console.log(C_count);
        $("#input_img" + C_count + "").on("change", handleImgFileSelect);
        console.log(C_count);
    });


    function handleImgFileSelect(e) {
        var C_count = $('.C_course').length;
        var files = e.target.files;
        var filesArr = Array.prototype.slice.call(files);
        console.log(C_count);

        filesArr.forEach(function (f) {
            if (!f.type.match("image.*")) {
                alert("이미지 파일만 업로드 가능합니다.");
                return;
            }

            sel_file = f;

            var reader = new FileReader();
            reader.onload = function (e) {
                $("#img" + C_count + "").attr("src", e.target.result);
            }
            reader.readAsDataURL(f);
        });
    }


    $(document).ready(function () {
        $('#Description').summernote({
            height: 150
        });

        $('#Benefits').summernote({
            height: 150
        });

        $('#Includes').summernote({
            height: 150
        });

        $('#Not_included').summernote({
            height: 150
        });

        $('#Notices_Policy').summernote({
            height: 150
        });

        $('#Cancel_Refund').summernote({
            height: 150
        });

    });

    function cmaComma(obj) {
        var firstNum = obj.value.substring(0, 1); // 첫글자 확인 변수
        var strNum = /^[/,/,0,1,2,3,4,5,6,7,8,9,/]/; // 숫자와 , 만 가능
        var str = "" + obj.value.replace(/,/gi, ''); // 콤마 제거
        var regx = new RegExp(/(-?\d+)(\d{3})/);
        var bExists = str.indexOf(".", 0);
        var strArr = str.split('.');

        if (!strNum.test(obj.value)) {
            alert("숫자만 입력하십시오.\n\n특수문자와 한글/영문은 사용할수 없습니다.");
            obj.value = 1;
            obj.focus();
            return false;
        }

        if ((firstNum < "0" || "9" < firstNum)) {
            alert("숫자만 입력하십시오.");
            obj.value = 1;
            obj.focus();
            return false;
        }

        while (regx.test(strArr[0])) {
            strArr[0] = strArr[0].replace(regx, "$1,$2");
        }
        if (bExists > -1) {
            obj.value = strArr[0] + "." + strArr[1];
        } else {
            obj.value = strArr[0];
        }
    }

    $(function () {
        //input을 datepicker로 선언
        $("#Sdate").datepicker({
            dateFormat: 'yy-mm-dd' //Input Display Format 변경
            , showOtherMonths: true //빈 공간에 현재월의 앞뒤월의 날짜를 표시
            , showMonthAfterYear: true //년도 먼저 나오고, 뒤에 월 표시
            , changeYear: true //콤보박스에서 년 선택 가능
            , changeMonth: true //콤보박스에서 월 선택 가능
            , showOn: "both" //button:버튼을 표시하고,버튼을 눌러야만 달력 표시 ^ both:버튼을 표시하고,버튼을 누르거나 input을 클릭하면 달력 표시
            , buttonImage: "http://jqueryui.com/resources/demos/datepicker/images/calendar.gif" //버튼 이미지 경로
            , buttonImageOnly: true //기본 버튼의 회색 부분을 없애고, 이미지만 보이게 함
            , buttonText: "선택" //버튼에 마우스 갖다 댔을 때 표시되는 텍스트
            , yearSuffix: "년" //달력의 년도 부분 뒤에 붙는 텍스트
            , monthNamesShort: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'] //달력의 월 부분 텍스트
            , monthNames: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'] //달력의 월 부분 Tooltip 텍스트
            , dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'] //달력의 요일 부분 텍스트
            , dayNames: ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'] //달력의 요일 부분 Tooltip 텍스트
            , minDate: "+1D" //최소 선택일자(-1D:하루전, -1M:한달전, -1Y:일년전)
            , maxDate: "+1Y" //최대 선택일자(+1D:하루후, -1M:한달후, -1Y:일년후)
        });

        //초기값을 오늘 날짜로 설정
        $('#Sdate').datepicker('setDate', 'today'); //(-1D:하루전, -1M:한달전, -1Y:일년전), (+1D:하루후, -1M:한달후, -1Y:일년후)
    });

    $(function () {
        //input을 datepicker로 선언
        $("#Edate").datepicker({
            dateFormat: 'yy-mm-dd' //Input Display Format 변경
            , showOtherMonths: true //빈 공간에 현재월의 앞뒤월의 날짜를 표시
            , showMonthAfterYear: true //년도 먼저 나오고, 뒤에 월 표시
            , changeYear: true //콤보박스에서 년 선택 가능
            , changeMonth: true //콤보박스에서 월 선택 가능
            , showOn: "both" //button:버튼을 표시하고,버튼을 눌러야만 달력 표시 ^ both:버튼을 표시하고,버튼을 누르거나 input을 클릭하면 달력 표시
            , buttonImage: "http://jqueryui.com/resources/demos/datepicker/images/calendar.gif" //버튼 이미지 경로
            , buttonImageOnly: true //기본 버튼의 회색 부분을 없애고, 이미지만 보이게 함
            , buttonText: "선택" //버튼에 마우스 갖다 댔을 때 표시되는 텍스트
            , yearSuffix: "년" //달력의 년도 부분 뒤에 붙는 텍스트
            , monthNamesShort: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'] //달력의 월 부분 텍스트
            , monthNames: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'] //달력의 월 부분 Tooltip 텍스트
            , dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'] //달력의 요일 부분 텍스트
            , dayNames: ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'] //달력의 요일 부분 Tooltip 텍스트
            , minDate: "+1D" //최소 선택일자(-1D:하루전, -1M:한달전, -1Y:일년전)
            , maxDate: "+1Y" //최대 선택일자(+1D:하루후, -1M:한달후, -1Y:일년후)
        });

        //초기값을 오늘 날짜로 설정
        $('#Edate').datepicker('setDate', 'today'); //(-1D:하루전, -1M:한달전, -1Y:일년전), (+1D:하루후, -1M:한달후, -1Y:일년후)
    });

    //image 미리보기
    var sel_file;

    $(document).ready(function () {


        $("#input_img").on("change", handleImgFileSelect);

    });


    function handleImgFileSelect(e) {

        var files = e.target.files;
        var filesArr = Array.prototype.slice.call(files);


        filesArr.forEach(function (f) {
            if (!f.type.match("image.*")) {
                alert("이미지 파일만 업로드 가능합니다.");
                return;
            }

            sel_file = f;

            var reader = new FileReader();
            reader.onload = function (e) {
                $("#img").attr("src", e.target.result);
            }
            reader.readAsDataURL(f);
        });
    }

</script>
