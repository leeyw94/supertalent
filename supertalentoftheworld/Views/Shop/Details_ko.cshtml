@model supertalentoftheworld.Models.Travel_Goods
@using supertalentoftheworld.Models
@{
    Layout = "/Views/Shared/_Layout.cshtml";
}
@Html.Partial("/Views/Layout/Header_ko.cshtml")


<link href="/Content/common/normalize.css" rel="stylesheet" />
<link href="/Content/common/ideal-image-slider.css" rel="stylesheet" />
<link href="/Content/common/default.css" rel="stylesheet" />
<link href="/css/userstyle.css" rel="stylesheet" />
<link href="/fontawesome-free-5.10.1-web/css/all.min.css" rel="stylesheet" />
<script src="/fontawesome-free-5.10.1-web/js/all.min.js"></script>

@*<section class="image-head-wrapper" style="background-image: url('/images/Background/Product-back.jpg'); background-size:cover;">
        <div class="inner-wrapper">
            <h1 class="in-img-text">Product</h1>
        </div>
    </section>*@


<div class="container" style="padding:0;margin-top:50px;">
    <div class="col-sm-8" style="margin-bottom:50px;">
        <div class="clearfix" style="max-width:100%;">
            <div id="slider" style="max-height:450px;">
                @foreach (var item in ViewBag.images as List<TG_Image>)
                {
                    <img src="@item.ImagePath" />
                }
            </div>
        </div>
        <div class="col-md-12">
            <h2 style="margin-top:30px; font-weight:bold">@Model.Title</h2><br />
            <p style="color:#666; font-weight:500;font-size:16px;">호텔+항공권+패션위크+뷰티워크샵+프로필,영상 콘텐츠+오라클 코스메틱 리에이젠세트 (30만원 상당)+다양한 특전 제공</p><br />

        </div>
    </div>
    <div class="col-sm-3">
        <div class="col-md-12" style="border:1px solid #ddd; padding:20px;line-height:2em;">
            <div class="text-right"><text style="font-weight:bold">Trip code </text>@Model.code</div>
            <div class="col-md-12" style="margin-top:15px; ">
                <span style="float:left; margin-right:10%;">
                    <img src="~/images/Shop/details1.png" width="30" height="30" />
                </span>
                <select class="form-control" onchange="sel_amount()" name="p_amount" id="p_amount" style="width:70%; ">
                    <option value="1">1 명</option>
                    <option value="2">2 명</option>
                    <option value="3">3 명</option>
                    <option value="4">4 명</option>
                </select>
            </div>
            <div class="col-md-12">

                <p class="des_title" style="color:#000;display:inline-block">&#8361;</p>
                <p id="price" class="des_title" style="color:#000; padding:10px 0;display:inline-block"></p>
            </div>
            <div class="col-md-12" style="margin-top:20px">
                <div class="row">
                    <div class="col-md-12">
                        @*<img style="margin-bottom:10px" src="/images/Shop/stars.png" />*@
                        <button type="button" style="min-width:200px;font-weight:100;" class="book-now-btn" onclick="payment2()">예약하기</button>
                    </div>
                </div>
                <br />
                <p>
                    2인 1실 기준, 항공, 식사, 입장권, 교통, 모든 팁 등 일체포함비용입니다.
                </p>
            </div>
            <div class="col-md-12" style="margin-top:30px">
                <span style="float:left;width:33%;text-align:center"><img src="~/images/Shop/details2.png" width="30" height="30" style="margin:auto;" /><span id="period"></span></span>
                <span style="float:left;width:33%;text-align:center"><img src="~/images/Shop/details3.png" width="30" height="30" style="margin:auto;" /><span>@Model.Country 국가</span></span>
                <span style="float:left;width:33%;text-align:center"><img src="~/images/Shop/details4.png" width="30" height="30" style="margin:auto;" /><span>@Model.City 도시</span><br /></span>

            </div>
            <div class="col-md-12 text-center" style="margin-top:20px;">
                <strong>@Model.Startc</strong><br />
                <strong>@Model.Endc</strong>
            </div>
        </div>
    </div>
    <div class="col-md-12">
        <div style="margin:0px auto;">
            <div class="row box">
                <div class="col-md-12">
                    <div class="shop-info2">

                    </div>
                </div>

            </div>
            <hr />

            @*@if (Model.Description != null)
        {
            <div class="row box" style="margin:3%;">
                <div class="col-md-2">
                    <h4 class="s_title">상품소개</h4>
                </div>
                <div class="col-md-9">
                    <div style="font-size:15px; letter-spacing:0.7px; line-height:2em; color:#000;">
                        @Html.Raw(Model.Description)
                    </div>
                </div>
            </div>
            <hr />
        }*@




            @if (Model.Includes != null)
            {
                <div class="row box" style="margin:3%;">
                    <div class="col-md-2">
                        <h4 class="s_title">포함사항</h4>
                    </div>
                    <div class="col-md-9">
                        <div style="font-size:15px; letter-spacing:0.7px; line-height:2em; color:#000;">
                            @Html.Raw(Model.Includes) <br />
                        </div>
                    </div>
                </div>
                <hr />
            }


            @if (Model.Includes != null)
            {
                <div class="row box" style="margin:3%;">
                    <div class="col-md-2">
                        <h4 class="s_title">불포함사항</h4>
                    </div>
                    <div class="col-md-9">
                        <div style="font-size:15px; letter-spacing:0.7px; line-height:2em; color:#000;">
                            @Html.Raw(Model.Not_included) <br />
                        </div>
                    </div>
                </div>
                <hr />
            }



            @if (Model.Includes != null)
            {
                <div class="row box" style="margin:3%;">
                    <div class="col-md-2">
                        <h4 class="s_title">유의사항</h4>
                    </div>
                    <div class="col-md-9">
                        <div style="font-size:15px; letter-spacing:0.7px; line-height:2em; color:#000;">
                            @Html.Raw(Model.Notice) <br />
                        </div>
                    </div>
                </div>
                <hr />
            }


            @if (Model.Includes != null)
            {
                <div class="row box" style="margin:3%;">
                    <div class="col-md-2">
                        <h4 class="s_title">예약안내</h4>
                    </div>
                    <div class="col-md-9">
                        <div style="font-size:15px; letter-spacing:0.7px; line-height:2em; color:#000;">
                            @Html.Raw(Model.Reservation) <br />
                        </div>
                    </div>
                </div>
                <hr />
            }


            @if (Model.Includes != null)
            {
                <div class="row box" style="margin:3%;">
                    <div class="col-md-2">
                        <h4 class="s_title">숙박안내</h4>
                    </div>
                    <div class="col-md-9">
                        <div style="font-size:15px; letter-spacing:0.7px; line-height:2em; color:#000;">
                            @Html.Raw(Model.Accommodations) <br />
                        </div>
                    </div>
                </div>
                <hr />
            }


            @if (Model.Cancel_Refund != null)
            {
                <div class="row box" style="margin:3%;">
                    <div class="col-md-2">
                        <h4 class="s_title">취소 수수료 안내</h4>
                    </div>
                    <div class="col-md-10">
                        <div style="font-size:14px; letter-spacing:-0.7px; line-height:1.6em; color:#333;">
                            @Html.Raw(Model.Cancel_Refund)
                        </div>
                    </div>
                </div>
                <hr />
            }

            @if (Model.Includes != null)
            {
                <div class="row box" style="margin:3%;">
                    <div class="col-md-2">
                        <h4 class="s_title">취소 유의사항</h4>
                    </div>
                    <div class="col-md-9">
                        <div style="font-size:15px; letter-spacing:0.7px; line-height:2em; color:#000;">
                            @Html.Raw(Model.Cancel_Notice) <br />
                        </div>
                    </div>
                </div>
                <hr />
            }

            @if (Model.Includes != null)
            {
                <div class="row box" style="margin:3%;">
                    <div class="col-md-2">
                        <h4 class="s_title">판매자 정보</h4>
                    </div>
                    <div class="col-md-9">
                        <div style="font-size:15px; letter-spacing:0.7px; line-height:2em; color:#000;">
                            @Html.Raw(Model.Seller_Info) <br />
                        </div>
                    </div>
                </div>
                <hr />
            }

            @*<div class="row box" style="margin:3%;">
            <div class="col-md-2">
                <h4 class="s_title">상세일정</h4>
            </div>

            <div class="col-md-9">
                <div>
                    <div style="vertical-align:text-top;">
                        @foreach (var item in ViewBag.course as List<Courses>)
                        {
                            <div>
                                <div style="width:100%; vertical-align:text-top; ">
                                    <p class="C_title">@item.Course_title</p>
                                    @Html.Raw(@item.Course)
                                </div>

                            </div>
                        }
                    </div>

                </div>
            </div>
            <hr />


            <div class="row box" style="margin:3%;">
                    <div class="col-md-3">
                        <h3 style="font-weight:500; text-align:center; color:#162541; margin-top:5%;">Review</h3>
                    </div>
                    <div class="col-md-9">
                        <div class="detail-review-in">
                            <textarea style="width:80%; min-height:140px; border:1px solid #ebebeb; display:table; float:left"></textarea>
                            <button style="border:solid 1px #ebebeb; padding:2%; vertical-align:middle; margin:auto; background:#fff; bottom:0; display:table">Commit</button>
                        </div>
                        <div class="detail-review-out" style="clear:both;">
                            <div class="detail-review-tit">Review Title</div>
                            <div class="detail-review-txt">
                                Review Text
                            </div>
                            <div class="detail-review-info">
                                <span class="name">Name</span>
                                <span class="star"><img title="별점" src="/images/Shop/star_5.png" /></span>
                                <span class="date">2019-01-01</span>
                            </div>

                        </div>
                    </div>
                </div>
        </div>*@
        </div>
    </div>


</div>
<div style="display:none">

</div>

<style>

    .des_title {
        font-weight: bold;
        font-size: 1.2em;
        margin-left: 5px;
        color: #808080
    }

    .s_title {
        font-weight: bold;
        text-align: center;
        color: #162541;
    }

    .C_title {
        font-weight: bold;
        font-size: 1.2em;
        margin-bottom: 30px;
        padding: 10px;
        border-top: 1px solid #606060;
        border-bottom: 1px solid #d4d4d4;
        background-color: #f1f1f1;
    }

    * {
        box-sizing: border-box;
    }

    .slider {
        width: 80%;
        margin: 100px auto;
    }

    .slick-slide {
        margin: 0px 10px;
    }

        .slick-slide img {
            width: 100%;
        }

    .slick-prev:before,
    .slick-next:before {
        color: black;
    }


    .slick-slide {
        transition: all ease-in-out .3s;
        opacity: .2;
    }

    .slick-active {
        opacity: .5;
    }

    .slick-current {
        opacity: 1;
    }

    .photo_mini div img {
        width: 100%;
        max-width: 240px;
        max-height: 160px;
    }

    .shop-info2 {
        max-width: 1200px;
        margin: auto;
    }

        .shop-info2 img {
            max-width: 40px;
        }

        .shop-info2 div:last-of-type {
            width: 40%;
        }

    .detail-city {
        width: 280px;
        height: 200px;
        margin-top: 10px;
    }
</style>
<script src="/Content/common/ideal-image-slider.min.js"></script>

<script type="text/javascript">
            var Sdate = "@Model.Sdate";
            var Edate = "@Model.Edate";

            var Sdate2 = Sdate.split("-");

            var dateArray = Edate.split("-");

            var dateObj2 = new Date(Sdate2[0], Number(Sdate2[1]) - 1, Sdate2[2]);
            var dateObj = new Date(dateArray[0], Number(dateArray[1]) - 1, dateArray[2]);

            var betweenDay = (dateObj.getTime() - dateObj2.getTime()) / 1000 / 60 / 60 / 24;

            $('#period').append(betweenDay+1+"일");



            $(document).ready(function () {
                $("img").addClass("img-responsive");
                $('.img-responsive').css("width", "");

    });

            var slider = new IdealImageSlider.Slider('#slider');
            slider.start();


    //가격 붙이기
    sel_amount();

    //인원 변경시 가격 붙이기
    function sel_amount() {
        var p_amount = document.getElementById("p_amount");
        var sel = p_amount.options[p_amount.selectedIndex].value;
        var price = @Model.Price_w;
        var total_price = parseInt(price) * sel;

        var p_com = addComma(total_price);
        $('#price').html(p_com + "원");


    }

    //가격 (,) 제거 한 후 계산
    function addComma(num) {
        var regexp = /\B(?=(\d{3})+(?!\d))/g;
        return num.toString().replace(regexp, ',');
    }

    function payment() {
        var p_amount = document.getElementById("p_amount");
        var sel = p_amount.options[p_amount.selectedIndex].value;
        var price = parseInt(@Model.Price_w);
        var amount = parseInt(price) * sel;
        var TG_id = parseInt(@Model.id);

        var data = {
            Amount: sel,
            Pay_method: "card",
            Price: price,
            TG_id: TG_id,
            Total_Price: amount
        };

        $.post('/api/shop/pay_ing', data, function (result) {
            if (result != "") {
                location.href = "/shop/pay_ing?id=" + result + "";
            } else {
                alert('Please use after Login');
                location.href = "/home/Login";
            }

        })
    }

    function payment2() {
       var p_amount = document.getElementById("p_amount");
        var sel = p_amount.options[p_amount.selectedIndex].value;
        var price = parseInt(@Model.Price_w);
        var amount = parseInt(price) * sel;
        var TG_id = parseInt(@Model.id);

        var data = {
            Amount: sel,
            Pay_method: "무통장입금",
            Price: price,
            TG_id: TG_id,
            Total_Price: amount
        };

        $.post('/api/payment/pay_ing', data, function (result) {
            if (result != "") {
                location.href = "/payment/pay_banktransfer_ko?id=" + result + "";
            } else {
                alert('Please use after Login');
                location.href = "/home/Login";
            }

        })
    }

</script>

@*@helper get_img(int id)
    {
        SupertalentE db = new SupertalentE();

        string src = (from a in db.TG_Image where a.courses_id == id select a.ImagePath).FirstOrDefault();

        var path = @src;

        <li data-thumb="@src">
            <img src="@src" style="width:100%" />
        </li>


    }*@

@*@helper get_img2(int id)
    {

        SupertalentE db = new SupertalentE();


        string src = (from a in db.TG_Image where a.courses_id == id select a.ImagePath).FirstOrDefault();

        <img src="@src" class="detail-city" />

    }*@

